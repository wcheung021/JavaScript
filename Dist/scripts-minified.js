let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150";function n(){fetch(t).then(e=>{if(!e.ok)throw Error("Error 404");return e.jspn()}).then(e=>{console.log(e)}).catch(e=>{console.error("Error 404",e)})}function i(t){"object"==typeof t&&"name"in t&&"detailsUrl"in t&&e.push(t)}function l(){return e}n(),setInterval(n,5e3);let o=document.querySelector(".modal");function a(e){let t=document.querySelector(".modal-body"),n=document.querySelector(".modal-title");n.innerHTML=e.name,t.innerHTML="";let i=document.createElement("h5"),l=document.createElement("img");l.classList.add("modal-img"),l.src=e.imageUrl;let o=document.createElement("p");o.innerText="Height: "+e.height;let a=document.createElement("p");a.innerHTML="Weight: "+e.weight;let r=document.createElement("p");r.innerHTML="Type: "+e.type;let s=document.createElement("p");s.innerHTML="Abilities: "+e.abilities,n.appendChild(i),t.appendChild(l),t.appendChild(o),t.appendChild(a),t.appendChild(r),t.appendChild(s)}function r(e){pokemonRepository.loadDetails(e).then(function(){a(e)})}return document.querySelector(".btn-primary").addEventListener("click",function(){let e=document.querySelector("#exampleModal");e.classList.add("show"),e.style.display="block"}),window.addEventListener("keydown",e=>{"Escape"===e.key&&o.classList.contains("is-visible")&&document.querySelector("#exampleModal").classList.remove("is-visible")}),{add:i,getAll:l,addListItem:function e(t){let n=document.querySelector(".pokemon-list"),i=document.createElement("li");i.classList.add("listpokemon-item");let l=document.createElement("button");l.classList.add("button-item"),l.innerText=t.name.toUpperCase(),l.classList.add("btn","btn-primary","btn-block","btn-lg","mb-3"),l.setAttribute("data-target","#exampleModal"),l.setAttribute("data-toggle","modal"),i.appendChild(l),n.appendChild(i),l.addEventListener("click",function(e){r(t)})},loadDetails:function e(t){return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.imageUrl=e.sprites.front_default,t.name=e.name,t.imageUrl=e.sprites.front_default,t.height=e.height,t.weight=e.weight,t.type=e.types.map(e=>e.type.name).join(", "),t.abilities=e.abilities.map(e=>e.ability.name).join(", ")}).catch(function(e){console.log(e)})},showDetails:r,showModal:a,loadList:function e(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let t={name:e.name,detailsUrl:e.url};i(t),console.log(t)})}).catch(function(e){console.error(e)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})})();
